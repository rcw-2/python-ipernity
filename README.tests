Running the tests
==================

1. The tests are designed to run with pytest, so you need to install
pytest before:

$ pip install pytest

2. You need an API key and secret for the tests. Generate an application
at `http://www.ipernity.com/apps/key` and save the generated data in a JSON
file called `.key.json` in the project's root directory. The file should
have the following format:

{
    "api_key": "YOUR_API_KEY",
    "api_secret": "YOUR_API_SECRET"
}

3. Next, you need an access token. This is generated by `test_login` in
`tests/test_00base.py`. Unfortunately, pytest normally blocks reading format
stdin, so you need to run this test without capture:

$ pytest -s tests/test_00base.py

The login process starts a browser window where you have to authorize access
to Ipernity. After login, the access token is stored in `.token.json` for use
by subsequent runs.

4. After that, it should normally be sufficient to just type

$ pytest

in the project's root directory. If you get errors about an invalid token,
try to remove `.token.json` and repeat step 3.

